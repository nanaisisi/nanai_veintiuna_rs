# コーディングルール

## 目的

この文書は、プロジェクト内のドキュメントとコードに対して「簡潔さ」と「分割（分離）」を徹底するための最低限のルールを示します。読みやすさ・保守性を高め、重複や肥大化を防ぎます。

## 共通原則

- 簡潔さを最優先する: 不要な説明や冗長な例を避ける。1つのページ／関数は1つの意図（責務）に絞る。
- 分割（分離）: 機能は小さく明確な単位に分け、責務が混ざらないようにする。再利用可能でテストしやすい設計を目指す。
- 明確な参照: 詳細は別ファイルへ切り出し、該当箇所へ短い要約とリンクを置く。

## ドキュメントのルール

- 要約優先: 各ドキュメントは冒頭に要点（50–150字）を書き、詳細は節や別ファイルへリンクする。
- 1トピック＝1ファイル: トピックが増えたら分割する。長文化したら小見出しではなく新しいファイルへ切り出す。
- 冗長な再掲を避ける: 同じ説明は1箇所に集約し、他は短い参照にする。
- 見出しと目次を活用: 探しやすくするため短い見出し（3語以内）と目次を用意する。

## コーディングのルール

- 単一責任: 関数・モジュールは単一の役割に限定する（長さより責務で判断）。
- 小さな関数を好む: 複雑な処理は小さな補助関数に分割し、上位関数は高レベルの流れだけを記述する。
- 明確なモジュール境界: 公開APIと内部実装を分離し、モジュール間の依存を最小化する。
- ドキュメントコメント: 重要な公開関数には短い説明（1–2行）を付け、詳細は別ドキュメントへ誘導する。
- テストで仕様を補完: 振る舞いの詳細はテストに書き、コードは簡潔に保つ。

## アップデートの実装ルール

- 段階的開発: 大きな機能追加は小さな単位に分割し、各段階で動作確認を行う。
- 動作テスト必須: 各実装段階で `cargo run` による動作確認、既存機能の回帰テストを実行する。
- コミット単位の管理: 機能単位でgitコミットを作成し、問題発生時のロールバックを容易にする。
- 統合前の安定化: 個別機能が完全に安定してから統合し、全体動作を最終確認する。

## 実践ガイド（短いチェックリスト）

- このファイル／関数の要点を1行で書けるか？ 書けなければ分割する。
- 同じ説明が別のファイルにないか確認する。あれば参照に置き換える。
- 関数が100行を超える場合は分割候補とする（目安）。
- モジュールは外部に公開するAPIを明確にし、内部実装は隠す。

## 参考と例

- ドキュメントは『要点→例→詳細へのリンク』の順で構成する。
- コードは『public: 高レベルの意図』→『private: 実装詳細』の順で置く。

## 運用

- プルリクで「簡潔化」「分割」の観点をレビューチェックリストに入れる。
- 大幅な統合や分割はCHANGELOGに短く理由を記述する。

---
追記: 本ファイルは短く保ち、詳細なスタイルや例は必要に応じて別ファイルに切り出してください。
